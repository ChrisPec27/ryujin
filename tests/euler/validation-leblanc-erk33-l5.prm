##
#
# Euler (optimized polytropic gas EOS) benchmark:
#
# The Leblanc shocktube is an analytic solution of the compressible Euler
# equations (with polytropic gas equation of state).We report the final,
# normalized L1, L2, L\infty error norms summed up the rho, m_1, and E
# components.
#
# This configuration uses an explicit ERK(3, 3, 1) timestepping.
# Expected results are reported in euler-isentropic_vortex-erk22.baseline
#
# The expected optimal rate of this test case is 1 in the L1 norm.
#
# Compile time options: dim = 1, Number = double
#
##

subsection A - TimeLoop
  set basename             = leblanc-erk33

  set enable compute error = true
  set error quantities     = rho, m_1, E

  set final time           = 0.66666666666667
  set output granularity   = 0.66666666666667

  set terminal update interval  = 0
end


subsection B - Equation
  set equation = euler
  set gamma    = 1.66666666666667
end


subsection C - Discretization
  set geometry        = rectangular domain
  set mesh refinement = 3

  subsection rectangular domain
    set boundary condition top    = periodic
    set boundary condition left   = dirichlet
    set boundary condition right  = dirichlet
    set boundary condition bottom = periodic

    set position bottom left      = 0, 0
    set position top right        = 1, 0.005
    set subdivisions x            = 200
    set subdivisions y            = 1
  end
end


subsection E - InitialValues
  set configuration = leblanc

  set direction     = 1, 0
  # for cG put the discontinuity right in the center of a cell
  set position      = 0.326732673267, 0
end


subsection F - HyperbolicModule
  set cfl with boundary dofs        = true

  set limiter iterations            = 2
  set limiter newton max iterations = 2
  set limiter newton tolerance      = 1e-10
  set limiter relaxation factor     = 8
end


subsection H - TimeIntegrator
  set cfl min               = 0.75
  set cfl max               = 0.75
  set cfl recovery strategy = none
  set time stepping scheme  = erk 33
end
